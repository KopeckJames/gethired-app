import{r as a,j as e,u as g}from"./components-9TVjVNdt.js";import{B as x}from"./Button-CDHjtM4L.js";import{C as h}from"./Card-Bc0Lcq-1.js";import{F as w}from"./MicrophoneIcon-At7u6jEd.js";function v({title:r,titleId:o,...s},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},s),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const N=a.forwardRef(v);function R({title:r,titleId:o,...s},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},s),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const b=a.forwardRef(R);function y(){const[r,o]=a.useState(!1),[s,i]=a.useState(null),[m,d]=a.useState(null),l=a.useRef(null),u=a.useRef([]),p=async()=>{try{const n=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(n);l.current=t,u.current=[],t.ondataavailable=c=>{c.data.size>0&&u.current.push(c.data)},t.onstop=()=>{const c=new Blob(u.current,{type:"audio/wav"});i(c)},t.start(),o(!0),d(null)}catch(n){console.error("Error accessing microphone:",n),d("Could not access microphone. Please check permissions.")}},f=()=>{l.current&&r&&(l.current.stop(),o(!1),l.current.stream.getTracks().forEach(n=>n.stop()))},j=async()=>{if(!s)return;const n=new FormData;n.append("audio",s);try{const t=await fetch("/api/analysis/audio",{method:"POST",body:n});if(!t.ok)throw new Error("Failed to analyze audio");const c=await t.json();console.log(c)}catch(t){console.error("Error analyzing audio:",t),d("Failed to analyze audio")}};return e.jsx(h,{variant:"bordered",className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Voice Notes"}),m&&e.jsx("div",{className:"text-red-600 text-sm",children:m}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{onClick:r?f:p,variant:r?"outline":"primary",className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-5 w-5"}),"Stop Recording"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-5 w-5"}),"Start Recording"]})}),s&&e.jsxs(x,{onClick:j,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Analyze Recording"]})]}),s&&e.jsx("div",{className:"mt-4",children:e.jsxs("audio",{controls:!0,src:URL.createObjectURL(s),className:"w-full","aria-label":"Recorded audio",children:[e.jsx("track",{kind:"captions",src:"",label:"Audio transcription"}),"Your browser does not support the audio element."]})})]})})}function z(){const{error:r}=g();return r?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:r})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Voice Notes"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(y,{}),e.jsx(h,{variant:"bordered",className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Previous Recordings"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Your recorded and analyzed voice notes will appear here."})]})})]})]})}export{z as default};
