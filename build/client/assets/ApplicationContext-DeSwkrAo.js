import{r as l,j as p}from"./components-9TVjVNdt.js";import{A as m}from"./Alert-BBZG7UN2.js";const x=l.createContext(null);function P({children:e}){const[t,c]=l.useState([]),u=l.useCallback((i,d,o)=>{const a=crypto.randomUUID(),n={id:a,type:i,title:d,message:o};c(s=>[...s,n]),setTimeout(()=>{r(a)},5e3)},[]),r=l.useCallback(i=>{c(d=>d.filter(o=>o.id!==i))},[]);return p.jsxs(x.Provider,{value:{notifications:t,addNotification:u,removeNotification:r},children:[e,p.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(i=>p.jsx(m,{variant:i.type,title:i.title,onClose:()=>r(i.id),children:i.message},i.id))})]})}function y(){const e=l.useContext(x);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e}const w={applications:[],filters:{status:[],search:""},sort:{field:"dateApplied",direction:"desc"}};function h(e,t){switch(t.type){case"ADD_APPLICATION":return{...e,applications:[...e.applications,t.payload]};case"UPDATE_APPLICATION":return{...e,applications:e.applications.map(c=>c.id===t.payload.id?t.payload:c)};case"DELETE_APPLICATION":return{...e,applications:e.applications.filter(c=>c.id!==t.payload)};case"SET_FILTERS":return{...e,filters:t.payload};case"SET_SORT":return{...e,sort:t.payload};default:return e}}const C=l.createContext(null);function T({children:e}){const[t,c]=l.useReducer(h,w),u=()=>{let r=t.applications;if(t.filters.status.length>0&&(r=r.filter(o=>t.filters.status.includes(o.status))),t.filters.search){const o=t.filters.search.toLowerCase();r=r.filter(a=>{var n,s;return a.company.toLowerCase().includes(o)||a.position.toLowerCase().includes(o)||((n=a.description)==null?void 0:n.toLowerCase().includes(o))||((s=a.location)==null?void 0:s.toLowerCase().includes(o))})}if(t.filters.dateRange){const{start:o,end:a}=t.filters.dateRange;r=r.filter(n=>{const s=new Date(n.dateApplied);return s>=new Date(o)&&s<=new Date(a)})}const{field:i,direction:d}=t.sort;return r.sort((o,a)=>{const n=o[i],s=a[i];if(typeof n=="string"&&typeof s=="string")return d==="asc"?n.localeCompare(s):s.localeCompare(n);if(i==="dateApplied"||i==="createdAt"||i==="updatedAt"){const f=new Date(n).getTime(),A=new Date(s).getTime();return d==="asc"?f-A:A-f}return 0}),r};return p.jsx(C.Provider,{value:{state:t,dispatch:c,getFilteredAndSortedApplications:u},children:e})}function g(){const e=l.useContext(C);if(!e)throw new Error("useApplicationContext must be used within an ApplicationProvider");return e}export{T as A,P as N,y as a,g as u};
