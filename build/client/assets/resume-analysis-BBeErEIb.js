import{r as i,j as e,u as N}from"./components-9TVjVNdt.js";import{C as x}from"./Card-Bc0Lcq-1.js";import{B as g}from"./Button-CDHjtM4L.js";import{S as h}from"./Select-B3oI0161.js";function f({resumes:n,jobDescriptions:r}){const[l,u]=i.useState(""),[c,j]=i.useState(""),[t,p]=i.useState(null),[b,o]=i.useState(!1),[m,d]=i.useState(null),y=async()=>{if(!l||!c){d("Please select both a resume and a job description");return}o(!0),d(null);try{const s=await fetch("/api.analysis.resume",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({resumeId:l,jobDescriptionId:c})}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to analyze resume");p(a.analysis)}catch(s){d(s instanceof Error?s.message:"Failed to analyze resume")}finally{o(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{variant:"bordered",className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Resume Analysis"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(h,{label:"Select Resume",value:l,onChange:s=>u(s.target.value),options:[{value:"",label:"Select a resume..."},...n.map(s=>({value:s.id,label:s.name}))]}),e.jsx(h,{label:"Select Job Description",value:c,onChange:s=>j(s.target.value),options:[{value:"",label:"Select a job description..."},...r.map(s=>({value:s.id,label:s.name}))]})]}),m&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:m}),e.jsx(g,{className:"mt-4",onClick:y,isLoading:b,disabled:!l||!c,children:"Analyze Resume"})]}),t&&e.jsx(x,{variant:"bordered",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Overall Score"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[t.score,"%"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Score Breakdown"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.criteriaScores).map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsxs("span",{className:"font-semibold",children:[a,"%"]})]},s))})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keywords Found"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.analysis.keywordsFound.map((s,a)=>e.jsx("li",{className:"text-green-600",children:s},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Missing Keywords"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.analysis.missingKeywords.map((s,a)=>e.jsx("li",{className:"text-red-600",children:s},a))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recommendations"}),e.jsx("ul",{className:"list-disc list-inside space-y-2",children:t.recommendations.map((s,a)=>e.jsx("li",{children:s},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Summary"}),e.jsx("p",{className:"text-gray-700",children:t.summary})]})]})})]})}function R(){const{resumes:n,jobDescriptions:r,error:l}=N();return l?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:l})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Resume Analysis"}),n.length===0||r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please upload at least one resume and one job description to use this feature."}),e.jsx("a",{href:"/documents",className:"text-blue-600 hover:text-blue-700",children:"Go to Documents â†’"})]}):e.jsx(f,{resumes:n,jobDescriptions:r})]})}export{R as default};
