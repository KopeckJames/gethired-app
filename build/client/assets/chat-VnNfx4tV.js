import{r as a,j as e,u as p}from"./components-9TVjVNdt.js";import{C as g}from"./Card-Bc0Lcq-1.js";import{B as j}from"./Button-CDHjtM4L.js";import{I as w}from"./Input-Dy9uozZT.js";function y({title:t,titleId:r,...n},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},n),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const b=a.forwardRef(y);function v(){const[t,r]=a.useState([]),[n,l]=a.useState(""),[c,m]=a.useState(!1),u=a.useRef(null),x=()=>{var s;(s=u.current)==null||s.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{x()},[t]);const f=async s=>{if(s.preventDefault(),!n.trim()||c)return;const i={role:"user",content:n};r(o=>[...o,i]),l(""),m(!0);try{const o=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...t,i]})});if(!o.ok)throw new Error("Failed to send message");const d=await o.json();r(h=>[...h,{role:"assistant",content:d.content}])}catch{r(d=>[...d,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{m(!1)}};return e.jsx(g,{variant:"bordered",className:"h-[calc(100vh-12rem)]",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:[t.map((s,i)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-4 ${s.role==="user"?"bg-blue-600 text-white":"bg-gray-100"}`,children:s.content})},i)),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[e.jsx(w,{value:n,onChange:s=>l(s.target.value),placeholder:"Type your message...",inputClassName:"flex-grow",containerClassName:"flex-grow",fullWidth:!0,disabled:c}),e.jsx(j,{type:"submit",disabled:c,children:e.jsx(b,{className:"h-5 w-5"})})]})})]})})}function S(){const{error:t}=p();return t?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600",children:t})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"AI Assistant"}),e.jsx(v,{})]})}export{S as default};
